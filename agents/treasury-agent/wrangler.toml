name = "oikonomos-treasury-agent"
main = "src/index.ts"
compatibility_date = "2024-01-01"

[vars]
# OIK-50: Switched to Base Sepolia for x402 native support
CHAIN_ID = "84532"
INTENT_ROUTER = "0xe57a783A55Da1FBA9aBAF1eD7bCDf16792604858"
RECEIPT_HOOK = "0x906E3e24C04f6b6B5b6743BB77d0FCBE4d87C040"
STRATEGY_ID = "0x0000000000000000000000000000000000000000000000000000000000000001"
# For local testing, use: http://localhost:8787
# For production, use: https://oikonomos-strategy-agent.workers.dev
STRATEGY_AGENT_URL = "http://localhost:8787"
# OIK-34: Indexer URL for marketplace discovery
INDEXER_URL = "https://indexer-production-323e.up.railway.app"
# OIK-50: Uniswap V4 contracts (Base Sepolia)
QUOTER_V4 = "0x4a6513c898fe1b2d0e78d3b0e0a4a151589b1cba"
POOL_MANAGER = "0x05E73354cFDd6745C338b50BcFDfA3Aa6fA03408"

# Legacy Sepolia addresses (for reference)
# CHAIN_ID = "11155111"
# INTENT_ROUTER = "0x89223f6157cDE457B37763A70ed4E6A302F23683"
# RECEIPT_HOOK = "0x41a75f07bA1958EcA78805D8419C87a393764040"
# QUOTER_V4 = "0x61b3f2011a92d183c7dbadbda940a7555ccf9227"
# POOL_MANAGER = "0xE03A1074c86CFeDd5C142C4F04F1a1536e203543"

# OIK-10: ZeroDev session key config (Base Sepolia chain ID 84532)
ZERODEV_BUNDLER_URL = "https://rpc.zerodev.app/api/v2/bundler/84532"
ZERODEV_PAYMASTER_URL = "https://rpc.zerodev.app/api/v2/paymaster/84532"

# Secrets (set via wrangler secret put)
# PRIVATE_KEY - Treasury agent dedicated private key (OIK-32)
# RPC_URL - Sepolia RPC URL
# AGENT_WALLET - Public address to receive x402 fees
# ZERODEV_PROJECT_ID - ZeroDev project ID for authentication

# KV namespace for state and policy storage
[[kv_namespaces]]
binding = "TREASURY_KV"
id = "c271c958a1ce4d38b256b6f0868f4314"

# Cron triggers for scheduled drift checks (every 5 minutes)
[triggers]
crons = ["*/5 * * * *"]
